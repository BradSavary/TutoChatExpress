<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Chat Simple</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>Chat Simple</h1>
  {% if not isAuthenticated %}
    <form id="login-form" autocomplete="off" method="POST">
      <input id="login-pseudo" name="pseudo" placeholder="Pseudo" maxlength="20" required />
      <input id="login-password" name="password" type="password" placeholder="Mot de passe" required />
      <button type="submit">Connexion</button>
      <div id="login-error" style="color:red; margin-top:8px;"></div>
    </form>
    <div id="chat-container" style="display:none;">
  {% else %}
    <form id="logout-form" action="/logout" method="get" style="text-align:right; margin-bottom:10px;">
      <button type="submit">DÃ©connexion</button>
    </form>
    <div id="chat-container">
  {% endif %}
    <ul id="messages">
      {% if messages %}
        {% for msg in messages %}
          <li>{{ msg.pseudo }} : {{ msg.content }}</li>
        {% endfor %}
      {% endif %}
    </ul>
    <form id="form" autocomplete="off">
      <input id="input" autocomplete="off" name="message" placeholder="Votre message..." />
      <button type="submit">Envoyer</button>
    </form>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/main.js"></script>
</body>
</html>
